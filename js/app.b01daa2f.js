(function(e){function t(t){for(var r,i,o=t[0],u=t[1],c=t[2],l=0,_=[];l<o.length;l++)i=o[l],a[i]&&_.push(a[i][0]),a[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);d&&d(t);while(_.length)_.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,o=1;o<n.length;o++){var u=n[o];0!==a[u]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},s=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=u;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"001e":function(e,t,n){},1725:function(e){e.exports={resource:[{resource_id:6723,resource_img:"/prop_1.jpg",resource_name:"Some One But Not Me"},{resource_id:1782,resource_img:"/prop_2.jpg",resource_name:"Second resource"},{resource_id:8954,resource_img:"/dmitry_SM.jpg",resource_name:"Dmitry SaGGaN'ov"},{resource_id:873,resource_img:"/ned.png",resource_name:"Ned Toku"}]}},"1dc2":function(e,t,n){"use strict";var r=n("5b1f"),a=n.n(r);a.a},2873:function(e,t,n){"use strict";var r=n("34b6"),a=n.n(r);a.a},"34b6":function(e,t,n){},4496:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e._m(0),n("monthSelector",{attrs:{monthGetter:e.testMonthGetter}}),n("calendar",{attrs:{data:e.data,events:e.events,statuses:e.statuses,selectedMonth:e.selectedMonth,selectedYear:e.selectedYear,singleEventClick:e.testSClick,doubleEventClick:e.testDClick,showMoreButton:e.testShowMoreButton,serverDragApprove:e.testServerDragApprove}}),n("div",{staticClass:"hero is-primary box"},[e._v("\n    "+e._s(e.messageBox)+"\n  ")])],1)},s=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h1",{staticClass:"hero is-primary box"},[n("span",[e._v(" This is primary | THIS IS  "),n("s",[e._v("BULMA")]),e._v(" BULBA")])])}],i=n("1725"),o=n("fd96"),u=n("fe4c"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"select is-primary is-rounded"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.month,expression:"month"}],on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.month=t.target.multiple?n:n[0]},function(t){return e.onChange(t)}]}},e._l(12,function(t){return n("option",{key:t.id,domProps:{value:t}},[e._v("\n            "+e._s(e.monthList[t-1])+"\n        ")])}),0)])},d=[],l={name:"monthSelector",data:function(){return{monthList:["January","February","March","April","May","June","Jule","August","September","October","November","December"],month:(new Date).getMonth()+1}},props:{monthGetter:{type:Function}},methods:{onChange:function(e){this.month=e.target.value,this.monthGetter(this.month)}},mounted:function(){}},_=l,v=n("2877"),h=Object(v["a"])(_,c,d,!1,null,null,null),f=h.exports,p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"column"},[e._v("\n    "+e._s(e.calculateDayCount())+"\n    "),e.rerenderValue?n("table",{staticClass:"table is-size-7 is-clipped"},[n("thead",[n("weekBar",{attrs:{weekMinus:e.processFirstDateWeekDay(),superfluous:36-e.processFirstDateWeekDay()-e.selectedMonthDayCount}}),n("dateBar")],1),n("resourceList",{attrs:{data:e.data,events:e.events}})],1):e._e()])},m=[],T=(n("c5f6"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",[n("th",{staticClass:"people"}),e._l(8-e.weekMinus,function(t){return n("week",{key:t.index,attrs:{week_char:e.weekDayList[e.weekMinus+t-2]}})}),e._l(e.weekDayList,function(e){return n("week",{key:e.index,attrs:{week_char:e}})}),e._l(e.weekDayList,function(e){return n("week",{key:e.index,attrs:{week_char:e}})}),e._l(e.weekDayList,function(e){return n("week",{key:e.index,attrs:{week_char:e}})}),e._l(e.calculateSuperfluous(),function(t){return n("week",{key:t.index,attrs:{week_char:e.weekDayList[t-1]}})}),e._l(e.calculateFlaw(),function(t){return n("week",{key:t.index,attrs:{week_char:e.weekDayList[t-1]}})})],2)}),k=[],E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("th",{staticClass:"size has-text-centered"},[e._v("\n    "+e._s(e.week_char)+"\n")])},y=[],D={name:"weekBarWeek",props:{week_char:String}},g=D,b=(n("2873"),Object(v["a"])(g,E,y,!1,null,null,null)),w=b.exports,N={name:"weekBar",components:{week:w},data:function(){return{weekDayList:["M","T","W","T","F","S","S"]}},props:{weekMinus:Number,superfluous:Number},methods:{calculateSuperfluous:function(){return this.superfluous>=0?7-this.superfluous:7},calculateFlaw:function(){return this.superfluous<0?-this.superfluous:0}}},C=N,$=(n("aaa8"),Object(v["a"])(C,T,k,!1,null,null,null)),M=$.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tbody",{},e._l(e.data.resource,function(t){return n("resource",{key:t.id,attrs:{resource_id:t.resource_id,resource_name:t.resource_name,image_URL:t.resource_img,events:e.selevtAndLoadEvent(t.resource_id)}})}),1)},x=[],B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",[n("resourceBlock",{attrs:{resource_img:e.image_URL,resource_name:e.resource_name}}),e._l(e.$parent.$parent.selectedMonthDayCount,function(t){return n("resourceDateBlock",{key:t.id,staticClass:"block",attrs:{events:e.chechEventByDate(t,e.$parent.$parent.selectedMonth,e.$parent.$parent.selectedYear),dayDate:t,blockDate:new Date(e.$parent.$parent.selectedYear,e.$parent.$parent.selectedMonth-1,t),resource_id:e.resource_id}})})],2)},A=[],V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("td",{},[n("div",{},[n("img",{staticClass:"image is-32x32 is-rounded is-pulled-left",attrs:{src:e.resource_img,alt:e.resource_name}}),n("div",{},[e._v("\n            "+e._s(e.resource_name)+"\n        ")])])])},j=[],O={name:"resourceBlock",props:{resource_id:Number,resource_img:String,resource_name:String}},L=O,F=(n("6831"),Object(v["a"])(L,V,j,!1,null,null,null)),I=F.exports,U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("td",{attrs:{"data-resource-id":e.resource_id}},[e._l(e.checkEventCount()[0],function(t){return n("event",{key:t.id,attrs:{statusColor:e.checkColorByStatus(t.status_id),sort:!1,event:t}})}),e.checkEventCount()[1]&&(e.averageEventDate()==e.dayDate||e.checkMonthJump())?n("button",{staticClass:"button showMoreButton",on:{click:e.showMoreClick}},[e._v("\n        â–¼\n    ")]):e._e()],2)},W=[],Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"event",style:{background:e.statusColor},attrs:{"data-resource-id":e.event.resource_id,"data-event-id":e.event.event_id},on:{click:function(t){return e.click()}}})},G=[],J={name:"eventBlock",props:{statusColor:String,event:Object,delay:{type:Number,default:250}},data:function(){return{clickCount:0,clickTimer:null}},methods:{click:function(){var e=this;this.clickCount++,1===this.clickCount?this.clickTimer=setTimeout(function(){e.clickCount=0,e.$parent.$parent.$parent.$parent.singleEventClick(e.event)},this.delay):2===this.clickCount&&(clearTimeout(this.clickTimer),this.clickCount=0,this.$parent.$parent.$parent.$parent.doubleEventClick(this.event))}}},P=J,R=(n("5ff0"),Object(v["a"])(P,Y,G,!1,null,null,null)),H=R.exports,z={name:"rDateBlock",components:{event:H},data:function(){return{basicColor:"#00ffff"}},props:{events:Array,dayDate:Number,blockDate:Date,resource_id:Number},methods:{onEnd:function(e){var t=e.item.dataset.eventId;if(e.item.dataset.resourceId!=e.to.parentNode.dataset.resourceId&&this.$parent.$parent.$parent.serverDragApprove()){var n=0;for(n in this.events)this.events[n].event_id==t&&(this.events[n].resource_id=e.to.parentNode.dataset.resourceId,this.$parent.$parent.$parent.rerender())}},checkColorByStatus:function(e){var t=0,n=this.$parent.$parent.$parent.$parent.statuses;for(t in n)if(n[t].id==e)return n[t].color},checkEventCount:function(){return 0==this.events.length?[0,!1]:this.events.length>2?[[this.events[0],this.events[1]],!0]:[this.events,!1]},averageEventDate:function(){var e=1,t=new Date(this.events[0].date_start),n=new Date(this.events[0].date_end);for(e in this.events){var r=new Date(this.events[e].date_start),a=new Date(this.events[e].date_end);(r>=t&&n>=a||r>=t&&n<=a||r<=t&&n>=a)&&(t=r,n=a)}var s=t.getDate();return s},checkMonthJump:function(){var e=new Date(this.events[this.events.length-1].date_start),t=new Date(this.events[this.events.length-1].date_end),n=this.blockDate,r=new Date(n.getFullYear(),n.getMonth()+1,0).getDate();if(e<=n&&n<=t){if(1==n.getDate())return 1;if(n.getDate()==r)return r}},showMoreClick:function(){this.$parent.$parent.$parent.showMoreButton(this.events)}},mounted:function(){this.checkEventCount()}},Z=z,q=(n("583e"),Object(v["a"])(Z,U,W,!1,null,null,null)),K=q.exports,Q={name:"rLine",components:{resourceBlock:I,resourceDateBlock:K},props:{image_URL:String,resource_name:String,resource_id:Number,events:Array},methods:{chechEventByDate:function(e,t,n){var r,a,s=new Date(n,t-1,e),i=[],o=0;for(o in this.events)r=new Date(this.events[o].date_start),a=new Date(this.events[o].date_end),r<=s&&s<=a&&i.push(this.events[o]);return i}}},X=Q,ee=(n("1dc2"),Object(v["a"])(X,B,A,!1,null,null,null)),te=ee.exports,ne={name:"allResouces",components:{resource:te},props:{data:Object,events:Object},methods:{selevtAndLoadEvent:function(e){var t=[],n=0;for(n in this.events.events)this.events.events[n].resource_id==e&&t.push(this.events.events[n]);return t},getDifference:function(e,t){var n=864e5,r=new Date(e).getTime(),a=new Date(t).getTime(),s=a-r;return Math.round(s/n)},array_move:function(e,t,n){if(n>=e.length){var r=n-e.length+1;while(r--)e.push(void 0)}return e.splice(n,0,e.splice(t,1)[0]),e},sortEventArray:function(e){var t,n=0;if(e.length<=1)return e;for(n in e)for(t in t=0,e)this.getDifference(e[n].date_start,e[n].date_end)<this.getDifference(e[t].date_start,e[t].date_end)&&(e=this.array_move(e,n,t))}}},re=ne,ae=Object(v["a"])(re,S,x,!1,null,null,null),se=ae.exports,ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",{},[n("dateBlock"),e._l(e.$parent.selectedMonthDayCount,function(e){return n("dateBlock",{key:e.id,attrs:{date_value:e}})})],2)},oe=[],ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("th",{staticClass:"has-text-weight-normal has-text-centered"},[e._v("\n    "+e._s(e.date_value)+"\n")])},ce=[],de={name:"dateBlock",props:{date_value:Number}},le=de,_e=Object(v["a"])(le,ue,ce,!1,null,null,null),ve=_e.exports,he={name:"dateBar",components:{dateBlock:ve}},fe=he,pe=Object(v["a"])(fe,ie,oe,!1,null,null,null),me=pe.exports,Te={name:"c_calendar",data:function(){return{selectedMonthDayCount:Number,rerenderValue:!0,firstDateWeekDay:0}},components:{weekBar:M,resourceList:se,dateBar:me},props:{data:Object,events:Object,statuses:Array,selectedMonth:Number,selectedYear:Number,singleEventClick:{type:Function},doubleEventClick:{type:Function},showMoreButton:{type:Function},serverDragApprove:{type:Function}},methods:{calculateDayCount:function(){this.selectedMonthDayCount=new Date(this.selectedYear,this.selectedMonth,0).getDate(),this.firstDateWeekDay=new Date(this.selectedYear,this.selectedMonth-1,1).getDay()},processFirstDateWeekDay:function(){return 0===this.firstDateWeekDay?7:this.firstDateWeekDay},rerender:function(){var e=this;this.rerenderValue=!this.rerenderValue,this.$nextTick(function(){e.rerenderValue=!e.rerenderValue})}}},ke=Te,Ee=(n("e94a"),Object(v["a"])(ke,p,m,!1,null,null,null)),ye=Ee.exports,De={name:"app",components:{calendar:ye,monthSelector:f},data:function(){return{data:i,events:o,statuses:u.statuses,messageBox:"",selectedYear:(new Date).getFullYear(),selectedMonth:(new Date).getMonth()+1}},methods:{testSClick:function(e){this.messageBox=e.event_name},testDClick:function(e){this.messageBox=e.event_name+" 2x"},testShowMoreButton:function(e){var t=0;for(t in this.messageBox="",e)this.messageBox+=e[t].event_name+" | "},testMonthGetter:function(e){this.selectedMonth=parseInt(e)}}},ge=De,be=Object(v["a"])(ge,a,s,!1,null,null,null),we=be.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(we)}}).$mount("#app")},"583e":function(e,t,n){"use strict";var r=n("4496"),a=n.n(r);a.a},"5b1f":function(e,t,n){},"5ff0":function(e,t,n){"use strict";var r=n("83d3"),a=n.n(r);a.a},6831:function(e,t,n){"use strict";var r=n("001e"),a=n.n(r);a.a},"68e7":function(e,t,n){},"83d3":function(e,t,n){},aaa8:function(e,t,n){"use strict";var r=n("e08f"),a=n.n(r);a.a},e08f:function(e,t,n){},e94a:function(e,t,n){"use strict";var r=n("68e7"),a=n.n(r);a.a},fd96:function(e){e.exports={events:[{event_id:1,resource_id:8954,status_id:1,event_name:"First EVENT",date_start:"2019-07-22T00:00:00",date_end:"2019-07-25T00:00:00"},{event_id:132,resource_id:8954,status_id:3,event_name:"EVENT #3",date_start:"2019-07-22T00:00:00",date_end:"2019-07-25T00:00:00"},{event_id:511,resource_id:8954,status_id:3,event_name:"EVENT WHEN HZ",date_start:"2019-07-25T00:00:00",date_end:"2019-07-27T00:00:00"},{event_id:532,resource_id:1782,status_id:1,event_name:"TEST 2",date_start:"2019-06-24T00:00:00",date_end:"2019-07-02T00:00:00"},{event_id:5234,resource_id:1782,status_id:3,event_name:"TEST 3",date_start:"2019-06-28T00:00:00",date_end:"2019-07-05T00:00:00"},{event_id:6234,resource_id:1782,status_id:3,event_name:"TEST 4",date_start:"2019-06-28T00:00:00",date_end:"2019-07-05T00:00:00"},{event_id:71,resource_id:8954,status_id:2,event_name:"Second EVENT",date_start:"2019-07-27T00:00:00",date_end:"2019-07-27T00:00:00"},{event_id:5,resource_id:6723,status_id:2,event_name:"Second EVENT",date_start:"2019-07-22T00:00:00",date_end:"2019-07-22T00:00:00"},{event_id:241,resource_id:8954,status_id:2,event_name:"241",date_start:"2019-07-22T00:00:00",date_end:"2019-07-28T00:00:00"},{event_id:12,resource_id:6723,status_id:2,event_name:"AAAAAAAAA EVENT",date_start:"2019-06-22T00:00:00",date_end:"2019-07-03T00:00:00"},{event_id:98234,resource_id:873,status_id:3,event_name:"NEDIUS 98234 EVENT",date_start:"2019-07-12T00:00:00",date_end:"2019-07-19T00:00:00"},{event_id:98235,resource_id:873,status_id:3,event_name:"NEDIUS 98235 EVENT",date_start:"2019-06-10T00:00:00",date_end:"2019-06-13T00:00:00"},{event_id:2420,resource_id:873,status_id:1,event_name:"NEDIUS 2420 EVENT",date_start:"2019-05-12T00:00:00",date_end:"2019-08-19T00:00:00"},{event_id:50,resource_id:873,status_id:2,event_name:"AAAAAAAAAA NED EVENT",date_start:"2019-06-12T00:00:00",date_end:"2019-06-19T00:00:00"},{event_id:984,resource_id:873,status_id:3,event_name:"NEDIUS 2421 EVENT",date_start:"2019-05-12T00:00:00",date_end:"2019-08-19T00:00:00"},{event_id:232267,resource_id:873,status_id:3,event_name:"NEDIUS 2422 EVENT",date_start:"2019-05-29T00:00:00",date_end:"2019-08-19T00:00:00"},{event_id:316266,resource_id:873,status_id:2,event_name:"NEDIUS 2423 EVENT",date_start:"2019-06-29T00:00:00",date_end:"2019-08-19T00:00:00"},{event_id:243,resource_id:8954,status_id:3,event_name:"243 EVENT",date_start:"2019-07-12T00:00:00",date_end:"2019-07-19T00:00:00"},{event_id:244,resource_id:8954,status_id:2,event_name:"244 EVENT",date_start:"2019-07-12T00:00:00",date_end:"2019-07-19T00:00:00"},{event_id:245,resource_id:8954,status_id:1,event_name:"245 EVENT",date_start:"2019-07-12T00:00:00",date_end:"2019-07-19T00:00:00"},{event_id:246,resource_id:8954,status_id:1,event_name:"246 EVENT",date_start:"2019-07-17T00:00:00",date_end:"2019-07-20T00:00:00"},{event_id:247,resource_id:8954,status_id:1,event_name:"247 EVENT",date_start:"2019-07-22T00:00:00",date_end:"2019-07-24T00:00:00"},{event_id:248,resource_id:8954,status_id:1,event_name:"248 EVENT",date_start:"2019-07-02T00:00:00",date_end:"2019-07-04T00:00:00"},{event_id:249,resource_id:8954,status_id:2,event_name:"249 EVENT",date_start:"2019-07-02T00:00:00",date_end:"2019-07-02T00:00:00"},{event_id:2410,resource_id:8954,status_id:2,event_name:"2410 EVENT",date_start:"2019-07-02T00:00:00",date_end:"2019-07-02T00:00:00"},{event_id:2411,resource_id:8954,status_id:3,event_name:"2411 EVENT",date_start:"2019-07-02T00:00:00",date_end:"2019-07-03T00:00:00"},{event_id:2412,resource_id:8954,status_id:1,event_name:"2412 EVENT",date_start:"2019-07-02T00:00:00",date_end:"2019-07-05T00:00:00"},{event_id:2413,resource_id:8954,status_id:1,event_name:"2413 EVENT",date_start:"2019-07-03T00:00:00",date_end:"2019-07-05T00:00:00"},{event_id:511,resource_id:1782,status_id:1,event_name:"TEST 1",date_start:"2019-06-12T00:00:00",date_end:"2019-07-27T00:00:00"}]}},fe4c:function(e){e.exports={statuses:[{id:1,type_id:0,name:"basic",color:"#00ffff"},{id:2,type_id:0,name:"vacantion",color:"#ffff99"},{id:3,type_id:0,name:"vacantion",color:"#cc99ff"}]}}});
//# sourceMappingURL=app.b01daa2f.js.map